import{defaultConfigFile as a,extModes as o}from"./constants.js";import d from"yargs";import{resizeType as p}from"./types.js";import{hideBin as c}from"yargs/helpers";import{generateDefaultConfigFile as l,logMessage as f}from"./utils.js";function h(t){t||(t=d(c(process.argv)));const e=t.usage("Usage: $0 [settings]").option("input",{describe:"Source directory",type:"string",alias:"in"}).option("output",{describe:"Destination directory",type:"string",alias:"out"}).option("config",{alias:"c",describe:"Configuration File",type:"string"}).option("interactive",{alias:"i",describe:"Interactive mode",type:"boolean"}).option("defaultIni",{alias:"d",describe:"Generate default config file",type:"boolean"}).option("maxSize",{alias:"s",describe:"Maximum image size in pixels",type:"number",default:void 0}).option("resizeType",{alias:"r",describe:"Resize type",type:"string",choices:p,default:void 0}).option("extMode",{alias:"e",describe:"Whenever to add or replace extension",type:"string",choices:["add","replace"],default:"replace",coerce:n=>o.includes(n)&&n in o||void 0||"replace"}).option("verbose",{alias:"v",type:"boolean",description:"Run with verbose logging"}).help("h").alias("h","help").parseSync(),r=typeof e.extMode=="string"&&e?.extMode in o?e.extMode:"replace",i=e.config??a;e.defaultIni&&i&&(l(i,e),f(`Generated default config file: ${i}`,!0),process.exit(0));const s={extMode:r||"replace",maxSize:e.maxSize?Number(e.maxSize):void 0,resizeType:e.resizeType?e.resizeType:void 0};return{srcDir:e.input??void 0,distDir:e.output??void 0,configFile:i,interactive:e.interactive??!1,verbose:!!e.verbose,options:JSON.parse(JSON.stringify(s))}}export{h as getCliOptions};
