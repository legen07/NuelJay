import r from"sharp";import{transparentColor as a}from"./constants.js";function f(e,n,t){let i=r(e);const o=t;if(t.compressor)switch(t.compressor){case"avif":i=i.avif({quality:t.quality});break;case"webp":i=i.webp({quality:t.quality});break;case"png":i=i.png({});break;case"mozjpeg":i=i.jpeg({mozjpeg:!0,quality:t.quality});break;case"jpg":i=i.jpeg({quality:t.quality,progressive:t.progressive});break}return o.options?.maxSize&&(i=i.resize({width:o.options?.maxSize,height:o.options?.maxSize,fit:o.options?.resizeType,background:o.options?.background??a}),o.options?.outMargin&&i.extend({top:o.options?.outMargin,bottom:o.options?.outMargin,left:o.options?.outMargin,right:o.options?.outMargin,background:o.options?.background??a})),i.toFile(n)}export{f as encodeImage};
